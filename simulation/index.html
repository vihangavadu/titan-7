<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TITAN V7 ‚Äî Operation Simulator</title>
  <link rel="stylesheet" href="css/titan.css">
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<header>
  <div>
    <span class="logo">‚¨° TITAN V7</span>
    <span class="version" style="margin-left:12px">OPERATION SIMULATOR</span>
  </div>
  <div style="display:flex;gap:14px;align-items:center;">
    <span class="badge badge-active pulse" id="sys-status">‚óè SYSTEM READY</span>
    <span style="color:var(--dim);font-size:0.72rem" id="clock"></span>
  </div>
</header>

<!-- ‚îÄ‚îÄ‚îÄ Step Progress Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="step-bar" id="step-bar">
  <div class="step-item active" data-step="1" onclick="goToStep(1)">
    <div class="step-num">1</div>
    <div class="step-label">TARGET</div>
  </div>
  <div class="step-item" data-step="2" onclick="goToStep(2)">
    <div class="step-num">2</div>
    <div class="step-label">PROXY &amp; SHIELD</div>
  </div>
  <div class="step-item" data-step="3" onclick="goToStep(3)">
    <div class="step-num">3</div>
    <div class="step-label">PROFILE FORGE</div>
  </div>
  <div class="step-item" data-step="4" onclick="goToStep(4)">
    <div class="step-num">4</div>
    <div class="step-label">CARD ASSET</div>
  </div>
  <div class="step-item" data-step="5" onclick="goToStep(5)">
    <div class="step-num">5</div>
    <div class="step-label">EXECUTE</div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ Step 1: Target Selection ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="main step-panel active" id="step-1">
  <div class="panel-left">
    <div class="card">
      <div class="card-title">Target Configuration</div>
      <div class="field-group">
        <label>TARGET PRESET</label>
        <select id="target-preset" onchange="loadTargetPreset()">
          <option value="">‚Äî select target ‚Äî</option>
          <option value="amazon">Amazon.com</option>
          <option value="walmart">Walmart.com</option>
          <option value="bestbuy">BestBuy.com</option>
          <option value="target">Target.com</option>
          <option value="adidas">Adidas.com</option>
          <option value="nike">Nike.com</option>
          <option value="apple">Apple.com</option>
          <option value="custom">Custom URL‚Ä¶</option>
        </select>
      </div>
      <div class="field-group" id="custom-url-group" style="display:none">
        <label>CUSTOM URL</label>
        <input type="url" id="custom-url" placeholder="https://shop.example.com/checkout">
      </div>
      <div class="field-group">
        <label>OPERATION MODE</label>
        <select id="op-mode">
          <option value="stealth">Stealth ‚Äî Max Evasion</option>
          <option value="speed">Speed ‚Äî Fast Execution</option>
          <option value="balance">Balanced</option>
          <option value="manual">Manual Control</option>
        </select>
      </div>
      <div class="field-group">
        <label>3DS STRATEGY</label>
        <select id="three-ds">
          <option value="ghost">Ghost Modal (default)</option>
          <option value="acs">ACS Intercept</option>
          <option value="bypass">Bypass (2D Sites)</option>
          <option value="manual">Manual OTP Entry</option>
        </select>
      </div>
      <button class="btn btn-primary btn-full" onclick="nextStep()">
        ‚ñ∂ CONFIRM TARGET
      </button>
    </div>

    <div class="card" id="target-info" style="display:none">
      <div class="card-title">Target Intel</div>
      <div id="target-intel-content" style="font-size:0.78rem;line-height:1.8;"></div>
    </div>
  </div>

  <div class="panel-center">
    <div class="card">
      <div class="card-title">System Health ‚Äî Pre-Flight</div>
      <div id="preflight-checks">
        <div class="svc-row"><span class="svc-name">VPN / Kill Switch</span><span class="badge badge-idle" id="chk-vpn">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">Hardware Shield</span><span class="badge badge-idle" id="chk-hw">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">Camoufox Browser</span><span class="badge badge-idle" id="chk-browser">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">Proxy Rotation</span><span class="badge badge-idle" id="chk-proxy">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">WebRTC Leak</span><span class="badge badge-idle" id="chk-webrtc">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">DNS Leak</span><span class="badge badge-idle" id="chk-dns">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">Canvas Noise</span><span class="badge badge-idle" id="chk-canvas">CHECKING‚Ä¶</span></div>
        <div class="svc-row"><span class="svc-name">Font Sanitizer</span><span class="badge badge-idle" id="chk-fonts">CHECKING‚Ä¶</span></div>
      </div>
      <div class="progress-track"><div class="progress-fill" id="preflight-bar"></div></div>
      <button class="btn btn-primary btn-full" onclick="runPreflight()">‚ñ∂ RUN PREFLIGHT</button>
    </div>
  </div>

  <div class="panel-right">
    <div class="card">
      <div class="card-title green">Console Output</div>
      <div class="console" id="console-1">
        <div class="line-dim">&gt; TITAN V7 Simulator loaded.</div>
        <div class="line-info">&gt; Select a target and run preflight to begin.</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ Step 2: Proxy & Hardware Shield ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="main step-panel" id="step-2">
  <div class="panel-left">
    <div class="card">
      <div class="card-title">Proxy Configuration</div>
      <div class="field-group">
        <label>PROXY TYPE</label>
        <select id="proxy-type">
          <option value="residential">Residential (Recommended)</option>
          <option value="mobile">Mobile 4G/5G</option>
          <option value="datacenter">Datacenter</option>
          <option value="vpn">VPN Tunnel</option>
        </select>
      </div>
      <div class="field-group">
        <label>REGION</label>
        <select id="proxy-region">
          <option value="us-east">US East</option>
          <option value="us-west">US West</option>
          <option value="uk">United Kingdom</option>
          <option value="de">Germany</option>
          <option value="au">Australia</option>
          <option value="ca">Canada</option>
          <option value="match">Match Target Region</option>
        </select>
      </div>
      <div class="field-group">
        <label>ROTATION INTERVAL (seconds)</label>
        <input type="range" id="rotation-interval" min="30" max="600" value="120" oninput="updateRotationLabel()">
        <div style="color:var(--cyan);font-size:0.75rem;margin-top:4px" id="rotation-label">120s</div>
      </div>
      <button class="btn btn-primary btn-full" onclick="connectProxy()">
        ‚ö° CONNECT PROXY
      </button>
    </div>

    <div class="card">
      <div class="card-title">Hardware Shield</div>
      <div class="svc-row"><span class="svc-name">CPU Spoof</span><span class="badge badge-idle" id="hw-cpu">INACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">MAC Address</span><span class="badge badge-idle" id="hw-mac">INACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">Disk UUID</span><span class="badge badge-idle" id="hw-disk">INACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">Screen Resolution</span><span class="badge badge-idle" id="hw-screen">INACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">eBPF Firewall</span><span class="badge badge-idle" id="hw-ebpf">INACTIVE</span></div>
      <div style="margin-top:10px">
        <button class="btn btn-success btn-full" onclick="engageHardwareShield()">
          üõ° ENGAGE HARDWARE SHIELD
        </button>
      </div>
    </div>
  </div>

  <div class="panel-center">
    <div class="card">
      <div class="card-title">Connection Status</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px">
        <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;border:1px solid var(--border)">
          <div style="color:var(--dim);font-size:0.68rem">EXIT IP</div>
          <div style="color:var(--cyan);font-size:1rem;font-weight:700;margin-top:4px" id="exit-ip">‚Äî.‚Äî.‚Äî.‚Äî</div>
        </div>
        <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;border:1px solid var(--border)">
          <div style="color:var(--dim);font-size:0.68rem">LOCATION</div>
          <div style="color:var(--text);font-size:0.85rem;margin-top:4px" id="exit-geo">Unknown</div>
        </div>
        <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;border:1px solid var(--border)">
          <div style="color:var(--dim);font-size:0.68rem">LATENCY</div>
          <div style="font-size:0.85rem;margin-top:4px" id="latency">‚Äî ms</div>
        </div>
        <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;border:1px solid var(--border)">
          <div style="color:var(--dim);font-size:0.68rem">RISK SCORE</div>
          <div style="font-size:0.85rem;margin-top:4px" id="risk-score">‚Äî</div>
        </div>
      </div>
      <div class="progress-track"><div class="progress-fill" id="proxy-bar"></div></div>
    </div>

    <div style="display:flex;gap:10px;margin-top:auto">
      <button class="btn btn-orange" onclick="goToStep(1)" style="flex:1">‚óÄ BACK</button>
      <button class="btn btn-primary" onclick="nextStep()" style="flex:2" id="step2-next" disabled>
        ‚ñ∂ NEXT: FORGE PROFILE
      </button>
    </div>
  </div>

  <div class="panel-right">
    <div class="card">
      <div class="card-title green">Console Output</div>
      <div class="console" id="console-2"></div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ Step 3: Profile Forge ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="main step-panel" id="step-3">
  <div class="panel-left">
    <div class="card">
      <div class="card-title orange">Genesis ‚Äî Profile Forge</div>
      <div class="field-group">
        <label>NATIONALITY</label>
        <select id="forge-nat">
          <option value="us">American</option>
          <option value="uk">British</option>
          <option value="ca">Canadian</option>
          <option value="au">Australian</option>
          <option value="de">German</option>
        </select>
      </div>
      <div class="field-group">
        <label>AGE RANGE: <span id="age-label" style="color:var(--orange)">35</span></label>
        <input type="range" id="age-slider" min="18" max="75" value="35" oninput="updateAgeLabel()">
      </div>
      <div class="field-group">
        <label>HISTORY DENSITY</label>
        <select id="history-density">
          <option value="0.5">0.5x ‚Äî Minimal</option>
          <option value="1.0">1.0x ‚Äî Normal</option>
          <option value="1.5" selected>1.5x ‚Äî Moderate</option>
          <option value="2.0">2.0x ‚Äî Dense</option>
          <option value="3.0">3.0x ‚Äî Maximum</option>
        </select>
      </div>
      <div class="field-group">
        <label>BEHAVIORAL PROFILE</label>
        <select id="behavior-profile">
          <option value="cautious">Cautious Shopper</option>
          <option value="impulsive">Impulsive Buyer</option>
          <option value="researcher">Deal Researcher</option>
          <option value="premium">Premium Customer</option>
        </select>
      </div>
      <button class="btn btn-orange btn-full" onclick="quickForge()" style="margin-bottom:8px">
        ‚ö° QUICK FORGE
      </button>
      <button class="btn btn-primary btn-full" onclick="fullForge()">
        ‚ñ∂ FULL FORGE (Deep)
      </button>
    </div>
  </div>

  <div class="panel-center">
    <div class="card">
      <div class="card-title orange">Forged Identity</div>
      <div id="profile-display" style="font-size:0.78rem;line-height:2;color:var(--dim)">
        No profile forged yet. Click QUICK FORGE to generate.
      </div>
      <div class="progress-track"><div class="progress-fill" id="forge-bar"></div></div>
    </div>

    <div style="display:flex;gap:10px;margin-top:8px">
      <button class="btn btn-orange" onclick="goToStep(2)" style="flex:1">‚óÄ BACK</button>
      <button class="btn btn-primary" onclick="nextStep()" style="flex:2" id="step3-next" disabled>
        ‚ñ∂ NEXT: CARD ASSET
      </button>
    </div>
  </div>

  <div class="panel-right">
    <div class="card">
      <div class="card-title green">Console Output</div>
      <div class="console" id="console-3"></div>
    </div>
    <div class="card" id="ghost-motor-card" style="display:none">
      <div class="card-title">Ghost Motor Biometrics</div>
      <div class="svc-row"><span class="svc-name">Mouse Entropy</span><span class="badge badge-active">ACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">Typing Cadence</span><span class="badge badge-active">ACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">Scroll Behavior</span><span class="badge badge-active">ACTIVE</span></div>
      <div class="svc-row"><span class="svc-name">Click Variance</span><span class="badge badge-active">ACTIVE</span></div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ Step 4: Card Asset ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="main step-panel" id="step-4">
  <div class="panel-left">
    <div class="card">
      <div class="card-title purple">Card Asset ‚Äî Cerberus</div>
      <div class="field-group">
        <label>CARD NUMBER</label>
        <input type="text" id="card-num" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="19"
               oninput="formatCardNum(this)" style="letter-spacing:2px">
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <div class="field-group">
          <label>EXPIRY</label>
          <input type="text" id="card-exp" placeholder="MM/YY" maxlength="5">
        </div>
        <div class="field-group">
          <label>CVV</label>
          <input type="text" id="card-cvv" placeholder="‚Ä¢‚Ä¢‚Ä¢" maxlength="4">
        </div>
      </div>
      <div class="field-group">
        <label>CARDHOLDER NAME</label>
        <input type="text" id="card-name" placeholder="Auto-fill from profile">
      </div>
      <div class="field-group">
        <label>BIN COUNTRY</label>
        <select id="card-country">
          <option value="us">United States</option>
          <option value="uk">United Kingdom</option>
          <option value="ca">Canada</option>
          <option value="au">Australia</option>
          <option value="de">Germany</option>
        </select>
      </div>
      <button class="btn btn-primary btn-full" style="margin-bottom:8px" onclick="validateCard()">
        ‚ö° VALIDATE CARD (Cerberus)
      </button>
      <button class="btn btn-orange btn-full" onclick="autofillCardName()">
        ‚ú¶ AUTO-FILL FROM PROFILE
      </button>
    </div>
  </div>

  <div class="panel-center">
    <div class="card">
      <div class="card-title purple">Cerberus Validation Report</div>
      <div id="cerberus-report" style="font-size:0.78rem;line-height:1.9;color:var(--dim)">
        No card validated yet.
      </div>
      <div class="progress-track"><div class="progress-fill" id="cerberus-bar"></div></div>
    </div>

    <div style="display:flex;gap:10px;margin-top:8px">
      <button class="btn btn-orange" onclick="goToStep(3)" style="flex:1">‚óÄ BACK</button>
      <button class="btn btn-success" onclick="nextStep()" style="flex:2" id="step4-next" disabled>
        ‚ñ∂ NEXT: EXECUTE OPERATION
      </button>
    </div>
  </div>

  <div class="panel-right">
    <div class="card">
      <div class="card-title green">Console Output</div>
      <div class="console" id="console-4"></div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ Step 5: Execute Operation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="main step-panel" id="step-5">
  <div class="panel-left">
    <div class="card">
      <div class="card-title green">Operation Control</div>
      <div class="svc-row"><span class="svc-name">Target</span><span id="exec-target" style="color:var(--cyan);font-size:0.78rem">‚Äî</span></div>
      <div class="svc-row"><span class="svc-name">Profile</span><span id="exec-profile" style="color:var(--orange);font-size:0.78rem">‚Äî</span></div>
      <div class="svc-row"><span class="svc-name">Proxy IP</span><span id="exec-ip" style="color:var(--green);font-size:0.78rem">‚Äî</span></div>
      <div class="svc-row"><span class="svc-name">Card (masked)</span><span id="exec-card" style="color:var(--purple);font-size:0.78rem">‚Äî</span></div>
      <div class="svc-row"><span class="svc-name">3DS Strategy</span><span id="exec-3ds" style="color:var(--text);font-size:0.78rem">‚Äî</span></div>
      <div style="margin-top:16px">
        <button class="btn btn-success btn-full" id="launch-btn" onclick="launchOperation()" style="font-size:1rem;padding:12px">
          ‚ñ∂‚ñ∂ LAUNCH OPERATION
        </button>
      </div>
      <div style="margin-top:8px">
        <button class="btn btn-danger btn-full" onclick="abortOperation()" id="abort-btn" disabled>
          ‚ñ† ABORT MISSION
        </button>
      </div>
    </div>

    <div class="card" style="border-color:rgba(255,51,85,0.3)">
      <div class="card-title" style="color:var(--red)">PANIC CONTROL</div>
      <button class="btn btn-danger btn-full" onclick="panicWipe()">
        ‚ö† PANIC ‚Äî WIPE SESSION
      </button>
      <div style="color:var(--dim);font-size:0.68rem;margin-top:8px">
        Kills browser, wipes session data, arms kill switch
      </div>
    </div>
  </div>

  <div class="panel-center">
    <div class="card">
      <div class="card-title green">Operation Status</div>
      <div id="op-phase" style="color:var(--dim);font-size:0.82rem;margin-bottom:10px">READY</div>
      <div class="progress-track" style="height:14px">
        <div class="progress-fill" id="op-bar" style="height:14px"></div>
      </div>

      <!-- Phase indicators -->
      <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:6px;margin-top:14px" id="phase-grid">
        <div class="phase-dot" id="ph-1">
          <div style="font-size:1.2rem;text-align:center">üåê</div>
          <div style="font-size:0.62rem;text-align:center;color:var(--dim);margin-top:2px">Navigate</div>
        </div>
        <div class="phase-dot" id="ph-2">
          <div style="font-size:1.2rem;text-align:center">üîç</div>
          <div style="font-size:0.62rem;text-align:center;color:var(--dim);margin-top:2px">Discovery</div>
        </div>
        <div class="phase-dot" id="ph-3">
          <div style="font-size:1.2rem;text-align:center">üõí</div>
          <div style="font-size:0.62rem;text-align:center;color:var(--dim);margin-top:2px">Cart</div>
        </div>
        <div class="phase-dot" id="ph-4">
          <div style="font-size:1.2rem;text-align:center">üí≥</div>
          <div style="font-size:0.62rem;text-align:center;color:var(--dim);margin-top:2px">Checkout</div>
        </div>
        <div class="phase-dot" id="ph-5">
          <div style="font-size:1.2rem;text-align:center">‚úÖ</div>
          <div style="font-size:0.62rem;text-align:center;color:var(--dim);margin-top:2px">Complete</div>
        </div>
      </div>
    </div>

    <div class="card" style="flex:1">
      <div class="card-title green">Real-Time Log</div>
      <div class="console" id="console-5" style="max-height:none;flex:1;min-height:200px"></div>
    </div>

    <button class="btn btn-orange" onclick="goToStep(4)" id="back-btn-5">‚óÄ BACK</button>
  </div>

  <div class="panel-right">
    <div class="card">
      <div class="card-title">Operation Result</div>
      <div id="op-result" style="font-size:0.82rem;color:var(--dim);line-height:1.9">
        Awaiting execution‚Ä¶
      </div>
    </div>

    <div class="card">
      <div class="card-title">Service Badges</div>
      <div class="svc-row"><span class="svc-name">VPN Tunnel</span><span class="badge badge-idle" id="svc-vpn">IDLE</span></div>
      <div class="svc-row"><span class="svc-name">eBPF Shield</span><span class="badge badge-idle" id="svc-ebpf">IDLE</span></div>
      <div class="svc-row"><span class="svc-name">Camoufox</span><span class="badge badge-idle" id="svc-browser">IDLE</span></div>
      <div class="svc-row"><span class="svc-name">Ghost Motor</span><span class="badge badge-idle" id="svc-motor">IDLE</span></div>
      <div class="svc-row"><span class="svc-name">3DS Handler</span><span class="badge badge-idle" id="svc-3ds">IDLE</span></div>
      <div class="svc-row"><span class="svc-name">TX Monitor</span><span class="badge badge-idle" id="svc-txmon">IDLE</span></div>
      <div class="svc-row"><span class="svc-name">Kill Switch</span><span class="badge badge-warning" id="svc-ks">ARMED</span></div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ JavaScript ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<script>
// ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const state = {
  step: 1,
  maxReached: 1,
  proxy: { connected: false, ip: null, geo: null },
  profile: null,
  card: null,
  operationRunning: false,
  aborted: false,
};

const TARGET_INTEL = {
  amazon:  { domain:"amazon.com",  risk:"Medium",  anti:"3DS, Device Fingerprint, Behavioral AI", csp:"Shift4",    notes:"High velocity detection on fresh accounts" },
  walmart: { domain:"walmart.com", risk:"Medium",  anti:"ReCaptcha, Device Intel",               csp:"Braintree", notes:"Geo+BIN must match; 3DS required" },
  bestbuy: { domain:"bestbuy.com", risk:"High",    anti:"Kount, Device Fingerprint",             csp:"Stripe",    notes:"Extremely strict on IP reputation" },
  target:  { domain:"target.com",  risk:"High",    anti:"Signifyd, Behavioral",                  csp:"Adyen",     notes:"Consistent proxy region required" },
  adidas:  { domain:"adidas.com",  risk:"Low",     anti:"2D sites exist",                        csp:"Stripe",    notes:"Low 3DS rate on select items" },
  nike:    { domain:"nike.com",    risk:"Medium",  anti:"SNKRS Bot Detection, Queue",            csp:"Adyen",     notes:"Queue bypass via timing" },
  apple:   { domain:"apple.com",   risk:"Very High",anti:"Internal ML, 3DS Mandatory",           csp:"Apple Pay", notes:"Account warmup critical" },
};

// ‚îÄ‚îÄ Clock ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent =
    now.toISOString().replace('T',' ').slice(0,19) + ' UTC';
}
setInterval(updateClock, 1000);
updateClock();

// ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function goToStep(n) {
  if (n > state.maxReached) return;
  document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
  document.getElementById('step-' + n).classList.add('active');
  document.querySelectorAll('.step-item').forEach(el => {
    const s = parseInt(el.dataset.step);
    el.classList.toggle('active', s === n);
    el.classList.toggle('done', s < state.maxReached || (s <= state.maxReached && s !== n));
  });
  state.step = n;
}

function nextStep() {
  state.maxReached = Math.max(state.maxReached, state.step + 1);
  goToStep(state.step + 1);
}

// ‚îÄ‚îÄ Console helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function clog(consoleid, text, cls='') {
  const el = document.getElementById(consoleid);
  if (!el) return;
  const line = document.createElement('div');
  if (cls) line.className = cls;
  line.textContent = '> ' + text;
  el.appendChild(line);
  el.scrollTop = el.scrollHeight;
}

// ‚îÄ‚îÄ Step 1: Preflight ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function loadTargetPreset() {
  const val = document.getElementById('target-preset').value;
  document.getElementById('custom-url-group').style.display = val === 'custom' ? 'block' : 'none';
  const intelBox = document.getElementById('target-info');
  const intelContent = document.getElementById('target-intel-content');
  if (TARGET_INTEL[val]) {
    const t = TARGET_INTEL[val];
    intelBox.style.display = 'block';
    intelContent.innerHTML =
      `<div><span style="color:var(--dim)">Domain:</span> <span style="color:var(--cyan)">${t.domain}</span></div>` +
      `<div><span style="color:var(--dim)">Risk:</span> <span style="color:var(--amber)">${t.risk}</span></div>` +
      `<div><span style="color:var(--dim)">Anti-Fraud:</span> ${t.anti}</div>` +
      `<div><span style="color:var(--dim)">CSP:</span> ${t.csp}</div>` +
      `<div style="color:var(--dim);font-size:0.72rem;margin-top:6px;border-top:1px solid var(--border);padding-top:6px">${t.notes}</div>`;
  } else {
    intelBox.style.display = 'none';
  }
}

const CHECKS = [
  {id:'chk-vpn',     label:'VPN / Kill Switch',  pass:true,  delay:300},
  {id:'chk-hw',      label:'Hardware Shield',     pass:true,  delay:600},
  {id:'chk-browser', label:'Camoufox Browser',    pass:true,  delay:900},
  {id:'chk-proxy',   label:'Proxy Rotation',      pass:true,  delay:1200},
  {id:'chk-webrtc',  label:'WebRTC Leak',         pass:true,  delay:1500},
  {id:'chk-dns',     label:'DNS Leak',            pass:true,  delay:1800},
  {id:'chk-canvas',  label:'Canvas Noise',        pass:true,  delay:2100},
  {id:'chk-fonts',   label:'Font Sanitizer',      pass:true,  delay:2400},
];

function runPreflight() {
  const bar = document.getElementById('preflight-bar');
  CHECKS.forEach(c => { document.getElementById(c.id).className = 'badge badge-idle'; document.getElementById(c.id).textContent = 'CHECKING‚Ä¶'; });
  bar.style.width = '0%';
  clog('console-1', 'Running pre-flight system checks‚Ä¶', 'line-info');
  CHECKS.forEach((c, i) => {
    setTimeout(() => {
      const el = document.getElementById(c.id);
      if (c.pass) {
        el.className = 'badge badge-active'; el.textContent = 'PASS';
      } else {
        el.className = 'badge badge-error'; el.textContent = 'FAIL';
      }
      bar.style.width = ((i+1) / CHECKS.length * 100) + '%';
      clog('console-1', `[${c.pass ? 'PASS' : 'FAIL'}] ${c.label}`);
      if (i === CHECKS.length - 1) {
        clog('console-1', 'Pre-flight complete. Proceed to configure target.', 'line-info');
      }
    }, c.delay);
  });
}

// ‚îÄ‚îÄ Step 2: Proxy & Shield ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateRotationLabel() {
  document.getElementById('rotation-label').textContent = document.getElementById('rotation-interval').value + 's';
}

function connectProxy() {
  const bar = document.getElementById('proxy-bar');
  const type = document.getElementById('proxy-type').value;
  const region = document.getElementById('proxy-region').value;
  clog('console-2', `Connecting ${type} proxy [${region}]‚Ä¶`, 'line-info');
  bar.style.width = '0%';

  const steps = [
    [400, 20, `Resolving proxy endpoint‚Ä¶`],
    [900, 45, `Authenticating with proxy pool‚Ä¶`],
    [1400, 70, `Establishing tunnel‚Ä¶`],
    [1800, 90, `Verifying exit IP‚Ä¶`],
    [2200, 100, `Proxy connected.`],
  ];
  steps.forEach(([delay, pct, msg]) => {
    setTimeout(() => {
      bar.style.width = pct + '%';
      clog('console-2', msg, pct === 100 ? 'line-info' : '');
      if (pct === 100) {
        const ip = `${rand(50,200)}.${rand(10,250)}.${rand(1,250)}.${rand(1,254)}`;
        const geos = {'us-east':'New York, US','us-west':'Los Angeles, US','uk':'London, GB','de':'Frankfurt, DE','au':'Sydney, AU','ca':'Toronto, CA','match':'(target region)'};
        state.proxy = { connected: true, ip, geo: geos[region] || region };
        document.getElementById('exit-ip').textContent = ip;
        document.getElementById('exit-ip').style.color = 'var(--green)';
        document.getElementById('exit-geo').textContent = state.proxy.geo;
        document.getElementById('latency').textContent = rand(40, 180) + ' ms';
        const risk = ['LOW','LOW','MEDIUM'][Math.floor(Math.random()*3)];
        const riskEl = document.getElementById('risk-score');
        riskEl.textContent = risk;
        riskEl.style.color = risk === 'LOW' ? 'var(--green)' : 'var(--amber)';
        document.getElementById('step2-next').disabled = false;
        clog('console-2', `Exit IP: ${ip} ‚Äî ${state.proxy.geo}`, 'line-info');
      }
    }, delay);
  });
}

function engageHardwareShield() {
  const items = ['hw-cpu','hw-mac','hw-disk','hw-screen','hw-ebpf'];
  const names = ['CPU Spoofed','MAC Randomized','Disk UUID Masked','Resolution Normalized','eBPF Firewall Active'];
  items.forEach((id, i) => {
    setTimeout(() => {
      const el = document.getElementById(id);
      el.className = 'badge badge-active';
      el.textContent = 'ACTIVE';
      clog('console-2', `[SHIELD] ${names[i]}`);
    }, i * 300 + 200);
  });
}

// ‚îÄ‚îÄ Step 3: Forge Profile ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateAgeLabel() {
  document.getElementById('age-label').textContent = document.getElementById('age-slider').value;
}

const FIRST_NAMES = ['James','Michael','Sarah','Emily','David','Jessica','Robert','Jennifer','William','Ashley'];
const LAST_NAMES  = ['Smith','Johnson','Williams','Brown','Jones','Garcia','Miller','Davis','Wilson','Anderson'];

function randName() { return FIRST_NAMES[rand(0,9)] + ' ' + LAST_NAMES[rand(0,9)]; }
function rand(a,b) { return Math.floor(Math.random()*(b-a+1))+a; }

function quickForge() {
  const age = document.getElementById('age-slider').value;
  const nat = document.getElementById('forge-nat').value;
  const bar = document.getElementById('forge-bar');
  bar.style.width = '0%';

  const name = randName();
  const dob = `${rand(1,28).toString().padStart(2,'0')}/${rand(1,12).toString().padStart(2,'0')}/${new Date().getFullYear()-age}`;
  const emails = [`${name.toLowerCase().replace(' ','.')}.${rand(10,99)}@gmail.com`,
                  `${name.split(' ')[0].toLowerCase()}${rand(100,999)}@yahoo.com`];
  const email = emails[rand(0,1)];
  const phones = {'us':'('+rand(200,999)+') '+rand(200,999)+'-'+rand(1000,9999), 'uk':'+44 7'+rand(100,999)+' '+rand(100,999)+rand(100,999), 'ca':'('+rand(416,905)+') '+rand(200,999)+'-'+rand(1000,9999), 'au':'+61 4'+rand(10,99)+' '+rand(100,999)+' '+rand(100,999), 'de':'+49 1'+rand(50,79)+' '+rand(1000000,9999999)};
  const phone = phones[nat] || phones['us'];
  const streets = ['Main St','Oak Ave','Maple Dr','Cedar Ln','Park Blvd','Lake Rd'];
  const cities = {'us':['New York','Los Angeles','Chicago','Houston'],'uk':['London','Manchester','Birmingham'],'ca':['Toronto','Vancouver','Montreal'],'au':['Sydney','Melbourne','Brisbane'],'de':['Berlin','Munich','Hamburg']};
  const city = (cities[nat]||cities['us'])[rand(0,2)];
  const addr = `${rand(100,9999)} ${streets[rand(0,5)]}, ${city}`;

  state.profile = { name, dob, email, phone, addr, age, nat };

  clog('console-3', 'Quick Forge initiated‚Ä¶', 'line-info');
  let pct = 0;
  const iv = setInterval(() => {
    pct += rand(8, 20);
    bar.style.width = Math.min(pct, 100) + '%';
    if (pct >= 100) {
      clearInterval(iv);
      document.getElementById('profile-display').innerHTML =
        `<div><span style="color:var(--dim)">Full Name:</span> <strong style="color:var(--orange)">${name}</strong></div>` +
        `<div><span style="color:var(--dim)">DOB:</span> ${dob}</div>` +
        `<div><span style="color:var(--dim)">Email:</span> ${email}</div>` +
        `<div><span style="color:var(--dim)">Phone:</span> ${phone}</div>` +
        `<div><span style="color:var(--dim)">Address:</span> ${addr}</div>` +
        `<div><span style="color:var(--dim)">Browser History Density:</span> ${document.getElementById('history-density').value}x</div>`;
      clog('console-3', `Profile forged: ${name}, ${age}y, ${nat.toUpperCase()}`, 'line-info');
      document.getElementById('step3-next').disabled = false;
      document.getElementById('ghost-motor-card').style.display = 'block';
      // Auto-fill card name
      document.getElementById('card-name').value = name;
    }
  }, 80);
}

function fullForge() {
  clog('console-3', 'Full deep forge initiated (simulated)‚Ä¶', 'line-info');
  quickForge();
}

// ‚îÄ‚îÄ Step 4: Card Validation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function formatCardNum(inp) {
  let v = inp.value.replace(/\D/g,'').substring(0,16);
  inp.value = v.replace(/(.{4})/g,'$1 ').trim();
}

function autofillCardName() {
  if (state.profile) {
    document.getElementById('card-name').value = state.profile.name;
    clog('console-4', `Auto-filled: ${state.profile.name}`);
  }
}

function validateCard() {
  const num = document.getElementById('card-num').value.replace(/\s/g,'');
  const exp = document.getElementById('card-exp').value;
  const cvv = document.getElementById('card-cvv').value;
  const name = document.getElementById('card-name').value;
  const country = document.getElementById('card-country').value;

  if (num.length < 13) { clog('console-4', '[ERR] Invalid card number', 'line-err'); return; }

  const bar = document.getElementById('cerberus-bar');
  bar.style.width = '0%';
  clog('console-4', 'Cerberus validation starting‚Ä¶', 'line-info');

  const checks = [
    [400, 20, 'Luhn algorithm check'],
    [800, 40, 'BIN database lookup'],
    [1200, 60, 'Issuer reachability test'],
    [1600, 80, 'Risk score assessment'],
    [2000, 100, 'Validation complete'],
  ];
  checks.forEach(([delay, pct, label]) => {
    setTimeout(() => {
      bar.style.width = pct + '%';
      clog('console-4', `[CERBERUS] ${label}‚Ä¶`);
      if (pct === 100) {
        const bins = {'us':'Chase Visa','uk':'Barclays Mastercard','ca':'TD Visa','au':'CBA Mastercard','de':'Deutsche Bank Visa'};
        const masked = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ' + num.slice(-4);
        state.card = { masked, exp, name, country, bin: bins[country]||'Visa' };
        document.getElementById('cerberus-report').innerHTML =
          `<div><span style="color:var(--dim)">Card:</span> <strong style="color:var(--purple)">${masked}</strong></div>` +
          `<div><span style="color:var(--dim)">Expiry:</span> ${exp||'‚Äî'}</div>` +
          `<div><span style="color:var(--dim)">Holder:</span> ${name||'‚Äî'}</div>` +
          `<div><span style="color:var(--dim)">BIN:</span> ${bins[country]||'Unknown'} (${country.toUpperCase()})</div>` +
          `<div><span style="color:var(--dim)">Luhn:</span> <span style="color:var(--green)">‚úì VALID</span></div>` +
          `<div><span style="color:var(--dim)">Risk:</span> <span style="color:var(--green)">LOW</span></div>`;
        document.getElementById('step4-next').disabled = false;
        clog('console-4', `Card validated: ${masked}`, 'line-info');
      }
    }, delay);
  });
}

// ‚îÄ‚îÄ Step 5: Execute Operation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function populateExecSummary() {
  const preset = document.getElementById('target-preset').value;
  const domain = TARGET_INTEL[preset]?.domain || document.getElementById('custom-url').value || '(custom)';
  document.getElementById('exec-target').textContent = domain;
  document.getElementById('exec-profile').textContent = state.profile?.name || '‚Äî';
  document.getElementById('exec-ip').textContent = state.proxy?.ip || '‚Äî';
  document.getElementById('exec-card').textContent = state.card?.masked || '‚Äî';
  document.getElementById('exec-3ds').textContent = document.getElementById('three-ds').options[document.getElementById('three-ds').selectedIndex].text;
}

// Called whenever step 5 becomes active
const origGoToStep = goToStep;
window.goToStep = function(n) { origGoToStep(n); if (n === 5) populateExecSummary(); };

function setSvcBadge(id, cls, text) {
  const el = document.getElementById(id);
  el.className = 'badge ' + cls;
  el.textContent = text;
}

const OP_PHASES = [
  { id:'ph-1', svc:'svc-browser', svcCls:'badge-active', svcTxt:'ACTIVE',  log:'Launching Camoufox browser with fingerprint injection‚Ä¶',  pct:15 },
  { id:'ph-2', svc:'svc-vpn',     svcCls:'badge-active', svcTxt:'ACTIVE',  log:'Navigating to target ‚Äî VPN tunnel active‚Ä¶',                 pct:30 },
  { id:'ph-3', svc:'svc-motor',   svcCls:'badge-active', svcTxt:'ACTIVE',  log:'Product discovery ‚Äî Ghost Motor biometrics engaged‚Ä¶',       pct:50 },
  { id:'ph-4', svc:'svc-3ds',     svcCls:'badge-active', svcTxt:'ACTIVE',  log:'Checkout sequence ‚Äî 3DS handler intercepting modal‚Ä¶',       pct:70 },
  { id:'ph-5', svc:'svc-txmon',   svcCls:'badge-active', svcTxt:'ACTIVE',  log:'Transaction submitted ‚Äî TX monitor watching for approval‚Ä¶', pct:90 },
];

function launchOperation() {
  if (state.operationRunning) return;
  state.operationRunning = true;
  state.aborted = false;

  document.getElementById('launch-btn').disabled = true;
  document.getElementById('abort-btn').disabled = false;
  document.getElementById('back-btn-5').disabled = true;
  document.getElementById('op-result').innerHTML = '<span style="color:var(--dim)">Operation in progress‚Ä¶</span>';

  setSvcBadge('svc-ks', 'badge-warning', 'ARMED');
  setSvcBadge('svc-ebpf', 'badge-active', 'ACTIVE');

  clog('console-5', 'OPERATION LAUNCHED', 'line-info');
  clog('console-5', `Target: ${document.getElementById('exec-target').textContent}`);
  clog('console-5', `Profile: ${state.profile?.name || '‚Äî'} | Proxy: ${state.proxy?.ip || '‚Äî'}`);

  const bar = document.getElementById('op-bar');
  let phaseIdx = 0;

  function runPhase() {
    if (state.aborted || phaseIdx >= OP_PHASES.length) {
      if (!state.aborted) finishOperation();
      return;
    }
    const ph = OP_PHASES[phaseIdx++];
    clog('console-5', ph.log);
    bar.style.width = ph.pct + '%';
    document.getElementById('op-phase').textContent = ph.log;
    document.getElementById(ph.id).querySelector('div').style.filter = 'drop-shadow(0 0 6px var(--green))';
    setSvcBadge(ph.svc, ph.svcCls, ph.svcTxt);
    setTimeout(runPhase, rand(1500, 2800));
  }
  runPhase();
}

function finishOperation() {
  const bar = document.getElementById('op-bar');
  bar.style.width = '100%';
  state.operationRunning = false;

  const outcomes = [
    { status:'APPROVED', color:'var(--green)',  msg:'Transaction approved. Order confirmation received.' },
    { status:'APPROVED', color:'var(--green)',  msg:'Transaction approved. Order confirmation received.' },
    { status:'3DS PASS',  color:'var(--cyan)',   msg:'3DS challenge completed via Ghost Modal. Approved.' },
    { status:'DECLINED',  color:'var(--red)',    msg:'Issuer declined. Possible AVS mismatch. Rotate card.' },
  ];
  const outcome = outcomes[rand(0, outcomes.length - 1)];

  document.getElementById('op-phase').textContent = 'COMPLETE ‚Äî ' + outcome.status;
  document.getElementById('op-result').innerHTML =
    `<div style="color:${outcome.color};font-size:1rem;font-weight:700;margin-bottom:8px">${outcome.status}</div>` +
    `<div>${outcome.msg}</div>` +
    `<div style="margin-top:10px;color:var(--dim);font-size:0.72rem">Profile: ${state.profile?.name||'‚Äî'}<br>Card: ${state.card?.masked||'‚Äî'}<br>IP: ${state.proxy?.ip||'‚Äî'}</div>`;

  clog('console-5', `RESULT: ${outcome.status} ‚Äî ${outcome.msg}`,
    outcome.status.includes('APPROV') || outcome.status.includes('3DS') ? 'line-info' : 'line-err');

  document.getElementById('launch-btn').disabled = false;
  document.getElementById('abort-btn').disabled = true;
  document.getElementById('back-btn-5').disabled = false;
}

function abortOperation() {
  state.aborted = true;
  state.operationRunning = false;
  document.getElementById('op-phase').textContent = 'ABORTED';
  document.getElementById('op-result').innerHTML = '<span style="color:var(--red)">Operation aborted by operator.</span>';
  document.getElementById('launch-btn').disabled = false;
  document.getElementById('abort-btn').disabled = true;
  document.getElementById('back-btn-5').disabled = false;
  clog('console-5', 'OPERATION ABORTED.', 'line-err');
}

function panicWipe() {
  if (!confirm('‚ö† PANIC WIPE: This will abort the operation and wipe all session data. Confirm?')) return;
  abortOperation();
  document.getElementById('sys-status').className = 'badge badge-error pulse';
  document.getElementById('sys-status').textContent = '‚óè PANIC ACTIVE';
  clog('console-5', '‚ö† PANIC ACTIVATED ‚Äî wiping session data‚Ä¶', 'line-err');
  setTimeout(() => {
    state.proxy = { connected: false, ip: null, geo: null };
    state.profile = null;
    state.card = null;
    clog('console-5', 'Session wiped. Kill switch armed.', 'line-warn');
    document.getElementById('sys-status').className = 'badge badge-warning';
    document.getElementById('sys-status').textContent = '‚óè KILL SWITCH ARMED';
  }, 2000);
}

// ‚îÄ‚îÄ Initial preflight auto-run on load ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
setTimeout(runPreflight, 400);
</script>
</body>
</html>
